import{deepmerge as m}from"deepmerge-ts";import{Command as p}from"commander";import a from"fast-glob";import c from"esbuild";import{exec as u}from"child_process";import l from"fs";const r=new p;r.name("playform").description("CLI to some JavaScript build scripts").version("0.0.1"),r.command("build").description("Build scripts").argument("<scripts...>","Scripts to build").action(async s=>{let o=[];for(const t of s)for(const e of await a(t))o.push(e);const i="dist",n={entryPoints:[],format:"esm",minify:!0,outdir:i,platform:"node",target:"node14",write:!0,plugins:[{name:"clean-dist",setup(t){t.onStart(async()=>{try{await l.promises.rm(i,{recursive:!0})}catch{}})}}]};await c.build(m(n,{entryPoints:o})),u("tsc")}),r.parse();
